90 INIT 100 REM convert svg M to move and L to vectors - in Fast Graphics HEX110 REM   Monty McGraw - July 29 2018, updated Dec 5, 2021115 REM   Feb 1 2023 - change input to serial, reduce string to 8192120 DIM F$(10600),S$(8192),V(931,2),T$(10)121 REM use cy value for r2wb-1i.svg122 REM PRINT " Input inkscape:cy to scale the image to 780: ";S123 REM INPUT S124 S=5000125 R=5000126 F1=45127 V=0128 L0=1129 REM initialize serial port for SVG string input132 CALL "RATE",9600,5,0133 CALL "TSTRIN","","",""134 CALL "RSTRIN","","",""135 CALL "CMFLAG",3136 S$=""137 PAGE 140 PRINT "Convert SVG M and L vectors to Fast Graphics BINARY file"150 PRINT "Type output BINARY file number: ";152 INPUT F1153 PRINT "Now press RETURN and start serial transfer"154 INPUT A$155 FIND @5:F1160 INPUT @40:F$161 IF F$="|EOG|" THEN 930162 L=LEN(F$)164 E$=SEG(F$,1,1)170 REM V0 is vector # 180 REM  M begins each vector sequence: M,L,L,L,...190 V0=1200 P=1205 M=-1210 E$=SEG(F$,P,1)220 IF E$="Z" THEN 900250 IF E$<>"M" THEN 285260 P=2270 GO TO 300280 REM so E$="L"285 P=P+1290 REM  Now get the data point and scale to GDU units300 Q=POS(F$,",",P+1)310 REM V1=X320 T$=SEG(F$,P,10)325 V1=VAL(T$)330 V(V0,1)=V1*M*100/R340 P=Q+1350 Q=POS(F$," ",P+1)355 IF Q<>0 THEN 370357 Q=L360 REM V2=Y370 T$=SEG(F$,P,10)375 V2=VAL(T$)380 V(V0,2)=V2*M*100/S390 P=Q+1400 V0=V0+1405 M=1410 IF P<L THEN 210500 REM end of THIS string segment505 DELETE W506 DIM W(V0-1,2)507 FOR I=1 TO V0-1508 W(I,1)=V(I,1)509 W(I,2)=V(I,2)510 NEXT I520 CALL "CHANGE",W,F$540 CALL "RDRAW",F$,1,0,0545 IF LEN F$ + LEN S$ <8192 THEN 550546 WRITE@5:S$547 S$=""550 S$=S$&F$555 REM GOSUB 4000556 L0=L0+1560 GO TO 160900 REM write FG string and end930 WRITE @5:S$940 WRITE @5:"|EOG|"950 CLOSE 960 END 1000 PRINT "ERROR - THIS IS NOT A PROPER SVG VECTOR DATA FILE"1010 PRINT "File must be a single string terminated by CR - no quotes"1020 PRINT "File must only contain M and L followed by two numbers"1030 PRINT "Edit the value of S in this program to change the scale"1040 PRINT "The scale calc should result in calculating GDU units"1050 PRINT "The Tek4050 needs GDU units: X up to 130, Y up to 100"1060 PRINT "Input SVG file number:"1070 INPUT F11080 GO TO 1301900 FIND @5:F1+11910 L=LEN(S$)2000 FOR I=1 TO INT(L/3000)+12010 F$=SEG(S$,(I-1)*3000+1,3000 MIN L-(I-1)*3000)2020 WRITE @5:F$2030 NEXT I2035 WRITE @5:"|EOG|"2040 END 2999 REM Read BB-8 in 3K chunks and display3000 INIT 3005 PRINT "BB-8"3010 DIM S$(16000),T$(3000)3015 FIND @5:F1+13020 S$=""3021 INPUT @2:A$3023 GOSUB 35003024 T=S3030 FOR I=1 TO 63040 READ @5:T$3050 S$=S$&T$3060 INPUT @2:A$3062 GOSUB 35003063 T=S-T3064 PRINT "Drawn in:";T;" seconds"3080 CALL "RDRAW",S$,1,0,03081 INPUT @2:A$3083 GOSUB 35003084 T=S-T3090 END 3500 REM    CALCULATE number of seconds in HH:MM:SS part of A$3510 B$=SEG(A$,11,2)3520 S=VAL(B$)*36003530 B$=SEG(A$,14,2)3540 S=S+VAL(B$)*603550 B$=SEG(A$,17,2)3560 END 3570 RETURN 3990 REM ASCII to 2 HEX characters sent to port 404000 FOR I=1 TO LEN(F$)4010 N$=SEG(F$,I,1)4020 M=ASC(N$)4030 H=INT(M/16)4040 L=M-H*164050 H$=CHR(H+48+7*(H>9))4060 L$=CHR(L+48+7*(L>9))4070 PRINT @40:H$;L$;4080 NEXT I4090 RETURN 5000 S$=""5005 FIND @5:F1+15010 READ @5:T$5015 IF T$="|EOG|" THEN 50405020 S$=S$&T$5030 GO TO 50105040 REM PRINT "Columbia"5050 CALL "RDRAW",S$,1,0,05060 END 