1 REM Battlestar Galactica Cylon Attack R12 Game - Jan 2024 mcm2 GO TO 1003 REM UDK variables are calculated relative to 65,50 center of screen4 P=(P-5) MAX -655 RETURN 8 P=(P+5) MIN 659 RETURN 16 Q=(Q+5) MIN 5017 RETURN 20 Q=(Q-5) MAX -5021 RETURN 32 D0=033 RETURN 40 PRINT @5,9:"ROOT"41 FIND @5:142 OLD @5:100 REM Battlestar Galactica Cylon Attack R12 Game - added UDKs110 REM    B$ = Cylon hit blast vectors120 REM    C()= Multiple(in future) Cylon location array130 REM    C$ = Cylon 140 REM    G$ = LASER RAY SOUND150 REM    H$ = Cylon HIT SOUND160 REM    I0 = Cylon X POSITION170 REM    I1 = Cylon Y POSITION180 REM    I2 = Cylon X VELOCITY190 REM    I3 = Cylon Y VELOCITY200 REM    M9 = number of Cylons missed210 REM    H9 = number of Cylons hit220 REM    N()= numeral series zero digit starting object#230 REM    R$ = Laser RAYs240 REM    T$ = Targeting crosshairs R12 object250 REM X9/Y9 = INSIDE Cylon polygon arrays260 REM Requires 4051 FG ROM or MaxiROM or 4052/54 R12 or MFM /w R12270 REM Requires Flash Drive275 REM can be used with UDK keys, or 4952 joystick or Vectrex joystick280 INIT 290 WINDOW 0,130,0,100300 SET DEGREES 310 SET KEY315 D0=1320 PRINT "Battlestar Galactica - Cylon Attack by mcm"330 PRINT "Use UDKs or joystick to move the Viper closer to the Cylon"340 PRI "Select user input device: 1 for Modified Tek 4952 joystick"342 PRINT " 2 for Vectrex joystick"344 PRINT " 3 for User Definable Keys (Function keys on 405x Emulator)"350 INPUT A1360 A1=INT(A1)370 IF A1<1 OR A1>3 THEN 340380 GO TO A1 OF 390,410,414390 PRI "Modified Tek 4952 joystick Selected."392 PRINT "Instructions: https://forum.vcfed.org/index.php?threads/"393 PRI "tektronix-4054a-with-option-30-cylon-attack-work-in-progress"394 PRI "-game.1244262/post-1332346 joystick rewiring - no soldering!"395 PRI "Press Spacebar to fire."400 GO TO 420410 PRINT "Vectrex joystick Selected.  Press button D to fire at Cylon."412 GO TO 420414 PRINT "UDKs Selected: 1=Left, 2=Right, 4=Up, 5=Down, 8=Fire"416 PRINT "if using 405x Emulator use Function keys F1,F2,F4,F5,F8"420 PRINT "Press UDK 10  to Quit and return to Flash Drive MAIN MENU"430 GO TO A1 OF 440,480,504440 PRINT "Press SPACEBAR then RETURN key to start the game! ";450 INPUT A$460 IF A$<>" " THEN 440470 GO TO 510480 PRINT "Press Vectrex button D to start the game! ";490 INPUT @5,31:P,Q,A0,B0,C0,D0500 IF D0=1 THEN 490502 GO TO 510504 D0=1506 PRINT "Press UDK 8 to start the game! ";507 IF D0=0 THEN 509508 GO TO 507509 D0=1510 REM Scale game 1 second delay to detected 4050 model520 DATA "4051",217,0.196324846518530 DATA "4052",1805,0.706280095237,"4052A",1516,0.796364876486540 DATA "4054",1805,0.88093139039,"4054A",1516,0.894514130768550 DATA "4054",1805,0.505007490939,"4054A",1516,0.590965583259560 READ I$,D9,T1570 IF T1<>RND(0) THEN 560580 I=RND(-1)590 I=RND(-1)600 REM set 1 sec delay loop constant D9 based on detected 4050 model 610 DIM B$(306),C$(99),G$(128),H$(512),R$(36),T$(666),N(8)620 REM first Cylon ship is #1630 R=1640 H=0650 REM Read R12 objects from file 3660 FIND @5:5670 READ @5:B$,C$,G$,H$,R$,T$680 REM mark hits and misses with Text characters - init both to 0690 M9=0700 H9=0710 REM clear screen & draw targeting crosshairs and circles720 PAGE 730 CALL "RDRAW",T$,1,0,0740 P=0750 Q=0760 REM Update Score770 MOVE 54.1,100780 PRINT "HIT ";H9;" : MISS ";M9790 REM init Cylon position & velocity800 GOSUB 1320810 GOSUB 1360820 CALL "RDRAW",C$,-1,I0,I1830 REM **************** Start the game main loop ********************840 REM if the Cylon is at edge of the screen - missed, delay 5 secs850 I0=I0+I2860 I1=I1+I3870 CALL "RDRAW",C$,-1,I0,I1880 IF I0>-60 AND I0<60 AND I1>-45 AND I1<45 THEN 970890 M9=M9+1900 FOR I=1 TO D9*2910 NEXT I920 GO TO 720930 REM player uses the joystick to move the Viper closer to the Cylon940 REM 4952 Joystick P/Q sampled at 1 msec interval or after keypress950 REM use player joystick to move Cylon relative to center of target960 REM fire lasers if A$=" " for 4952 or D0=0 for Vectrex D or UDK 8970 GO TO A1 OF 980,1040,1032980 CALL "JGIN",1,P,Q,A$990 IF A$=" " THEN 10901000 REM CONVERT 4952 ABS X/Y TO RELATIVE 1010 P=(P-65)*101020 Q=(Q-50)*121030 GO TO 10601032 IF D0=0 THEN 10361033 I0=I0-P/101034 I1=I1-Q/101035 GO TO 8501036 REM UDK8 pressed, set D0 back to 1 and then fire1037 D0=11038 GO TO 10901040 INPUT @5,31:P,Q,A0,B0,C0,D01050 IF D0=0 THEN 10901060 I0=I0-(P-65)/5001070 I1=I1-(Q-50)/5001080 GO TO 8501090 IF ABS(I0)<8 AND ABS(I1)<2 THEN 11601100 M9=M9+11110 CALL "RDRAW",C$,1,I0,I11120 CALL "RDRAW",R$,-3,0,01130 CALL "SOUNDS",G$1140 GO TO 9001150 REM kill shot on Cylon #R1160 CALL "RDRAW",C$,1,I0,I11170 CALL "RDRAW",R$,-3,0,01180 CALL "SOUNDS",G$1190 REM CALL "RDRAW",B$,1,0,01200 H9=H9+11210 REM GO TO 5801220 CALL "RDRAW",C$,1,I0,I11230 MOVE 65-8+I0,50-2+I11240 GO TO 9001250 REM test - show targeting outline1260 RDRAW 0,41270 RDRAW 16,01280 RDRAW 0,-41290 RDRAW -16,01300 GO TO 9001310 REMARK        INITIALIZE Cylon POSITION to center of 130,1001320 I0=118*(RND(1)-0.5)+61330 I1=78*(RND(1)-0.5)+61340 RETURN 1350 REMARK        INITIALIZE Cylon VELOCITY1360 I2=1.5*RND(1)-0.51370 I3=1.5*RND(1)-0.51380 RETURN 1390 REM test joystick JGIN returned X and Y values1400 PAGE 1410 CALL "RDRAW",T$,1,0,01420 CALL "JGIN",10,P,Q,A$1430 PRINT P,Q,A$1440 GO TO 1410